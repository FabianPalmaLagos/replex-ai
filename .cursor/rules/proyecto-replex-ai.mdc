# Proyecto Replex AI - Reglas de Desarrollo

## ğŸ“‹ DescripciÃ³n del Proyecto

**Replex AI** es una plataforma SaaS de auto-generaciÃ³n y publicaciÃ³n de micro-videos (TikTok, YouTube Shorts, Instagram Reels) desde prompts de lenguaje natural. El proyecto combina inteligencia artificial avanzada con herramientas de ediciÃ³n intuitivas.

## ğŸ—ï¸ Arquitectura del Proyecto

### Estructura de Monorepo
```
replex-ai/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ frontend/     # React 18 + TypeScript + Vite + Tailwind CSS âœ…
â”‚   â””â”€â”€ backend/      # Node.js 18.20.0 + Express.js + JWT Auth âœ…
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ config/       # Configuraciones compartidas
â”‚   â”œâ”€â”€ shared/       # Utilidades compartidas
â”‚   â””â”€â”€ types/        # Tipos TypeScript compartidos âœ…
â”œâ”€â”€ scripts/          # Scripts de automatizaciÃ³n âœ…
â””â”€â”€ docs/            # DocumentaciÃ³n del proyecto
```

### Tech Stack Principal
- **Frontend**: React 18 + TypeScript + Vite + Tailwind CSS 3.4 âœ…
- **Backend**: Node.js 18.20.0 LTS + Express.js + JWT âœ…
- **Base de Datos**: PostgreSQL 15+ + Redis âœ…
- **ContainerizaciÃ³n**: Docker + Docker Compose âœ…
- **Video Processing**: FFmpeg/WASM + WebCodecs API (futuro)

## ğŸ¯ Principios de Desarrollo

### Reglas de Usuario Establecidas
1. **No generar documentaciÃ³n** a menos que sea solicitada explÃ­citamente
2. **Responder siempre en EspaÃ±ol**
3. **Aplicar principios SOLID y DRY** de manera equilibrada, sin exagerar
4. **Usar Context7** para interactuar con librerÃ­as y dependencias
5. **Priorizar modificar cÃ³digo existente** por sobre crear cÃ³digo nuevo
6. **Simplicidad sobre complejidad** - hacer el cÃ³digo mÃ¡s simple siempre que sea posible

### Mejores PrÃ¡cticas
- Usar TypeScript estricto en todo el proyecto
- Implementar componentes reutilizables y tipados
- Seguir convenciones de naming consistentes
- Mantener separaciÃ³n clara entre frontend y backend
- Usar workspaces de npm para gestiÃ³n de dependencias

## ğŸ“ Archivos Clave de Referencia

### ConfiguraciÃ³n Principal
- [package.json](mdc:package.json) - ConfiguraciÃ³n del monorepo y scripts principales
- [tsconfig.json](mdc:tsconfig.json) - ConfiguraciÃ³n TypeScript global
- [docker-compose.yml](mdc:docker-compose.yml) - Servicios de desarrollo (PostgreSQL, Redis)
- [env.example](mdc:env.example) - Variables de entorno de ejemplo

### Frontend
- [apps/frontend/package.json](mdc:apps/frontend/package.json) - Dependencias del frontend
- [apps/frontend/vite.config.ts](mdc:apps/frontend/vite.config.ts) - ConfiguraciÃ³n de Vite
- [apps/frontend/tailwind.config.js](mdc:apps/frontend/tailwind.config.js) - ConfiguraciÃ³n de Tailwind CSS

### Backend
- [apps/backend/package.json](mdc:apps/backend/package.json) - Dependencias del backend
- [apps/backend/src/app.ts](mdc:apps/backend/src/app.ts) - AplicaciÃ³n principal Express.js

### PlanificaciÃ³n
- [plan-proyecto-replex-ai.md](mdc:plan-proyecto-replex-ai.md) - Plan detallado del proyecto por fases

## ğŸš€ Estado Actual del Proyecto

### âœ… Completado (Fases 0, 0.5, 1 y 1.5) - 50% del Proyecto
- **Monorepo configurado** con workspaces
- **Docker Compose** con PostgreSQL + Redis + Adminer + Redis Commander
- **Frontend funcional** con React 18 + TypeScript + Tailwind CSS
- **Componentes principales**: Dashboard, GestiÃ³n de Series, GeneraciÃ³n IA
- **Backend API REST** completo con Express.js
- **Sistema de autenticaciÃ³n JWT** completo con access/refresh tokens
- **Base de datos operativa** con tablas users y refresh_tokens
- **Herramientas de desarrollo**: ESLint, Prettier, TypeScript
- **Sistema de logging** con Winston
- **Middleware de seguridad**: CORS, helmet, rate limiting
- **Emails transaccionales** para verificaciÃ³n y reset de contraseÃ±a

### ğŸ”„ En Progreso
- Ninguna tarea actualmente en progreso

### âŒ Pendiente (Fases 2-8)
- **IntegraciÃ³n Frontend-Backend**: Conectar React con API de autenticaciÃ³n
- **GestiÃ³n de Series**: Backend API para CRUD de series
- **Motor de generaciÃ³n de contenido IA**
- **Editor timeline en navegador**
- **IntegraciÃ³n con redes sociales**
- **Analytics y moderaciÃ³n**

## ğŸ¨ Convenciones de CÃ³digo

### TypeScript
- Usar interfaces para definir tipos de datos
- Exportar tipos desde `packages/types/src/`
- Usar tipos estrictos y evitar `any`

### React
- Componentes funcionales con hooks
- Props tipadas con interfaces
- Usar Tailwind CSS para estilos
- Componentes reutilizables en `src/components/`

### Backend
- Usar Express.js con TypeScript
- Middleware para autenticaciÃ³n y validaciÃ³n
- Servicios separados para lÃ³gica de negocio
- Schemas de validaciÃ³n con Joi

### Naming Conventions
- Archivos: kebab-case (`user-profile.tsx`)
- Componentes: PascalCase (`UserProfile`)
- Variables/funciones: camelCase (`getUserData`)
- Constantes: UPPER_SNAKE_CASE (`API_BASE_URL`)

## ğŸ”§ Scripts Disponibles

### Desarrollo
- `npm run dev` - Ejecuta frontend y backend en paralelo
- `npm run dev:frontend` - Solo frontend (puerto 5173)
- `npm run dev:backend` - Solo backend (puerto 3000)

### Docker
- `npm run docker:up` - Levanta servicios de base de datos
- `npm run docker:down` - Detiene servicios
- `npm run docker:logs` - Ver logs de contenedores

### Calidad de CÃ³digo
- `npm run lint` - Ejecuta ESLint en todos los workspaces
- `npm run format` - Formatea cÃ³digo con Prettier
- `npm test` - Ejecuta tests (cuando estÃ©n implementados)

## ğŸŒ URLs de Desarrollo

### Aplicaciones
- **Frontend**: http://localhost:5173
- **Backend API**: http://localhost:3000/api/v1
- **Health Check**: http://localhost:3000/api/v1/health

### Base de Datos
- **PostgreSQL**: localhost:5432 (replex_user/replex_password)
- **Redis**: localhost:6379
- **Adminer**: http://localhost:8080
- **Redis Commander**: http://localhost:8081

### Credenciales de Prueba
- **Admin**: admin@replex-ai.com / admin123
- **Base de datos**: replex_user / replex_password

## ğŸ¯ Objetivos de Desarrollo

### Inmediatos (Fase 2)
- Conectar frontend con backend API de autenticaciÃ³n
- Implementar gestiÃ³n de series en backend
- Integrar sistema de prompts con plantillas

### Mediano Plazo (Fases 3-4)
- Integrar APIs de IA para generaciÃ³n de contenido
- Implementar procesamiento de audio y voz
- Desarrollar queue system para procesamiento asÃ­ncrono

### Largo Plazo (Fases 5-8)
- Editor timeline avanzado en navegador
- IntegraciÃ³n con redes sociales
- Sistema de analytics y optimizaciÃ³n

## ğŸ” Sistema de AutenticaciÃ³n Implementado

### Endpoints Disponibles
- `POST /api/v1/auth/register` - Registro de usuarios
- `POST /api/v1/auth/login` - Inicio de sesiÃ³n
- `POST /api/v1/auth/refresh` - Renovar tokens
- `POST /api/v1/auth/logout` - Cerrar sesiÃ³n
- `POST /api/v1/auth/verify-email/:token` - Verificar email
- `POST /api/v1/auth/forgot-password` - Solicitar reset de contraseÃ±a
- `POST /api/v1/auth/reset-password` - Restablecer contraseÃ±a
- `GET /api/v1/auth/me` - InformaciÃ³n del usuario autenticado
- `GET /api/v1/auth/status` - Estado de autenticaciÃ³n

### CaracterÃ­sticas
- **JWT Tokens**: Access tokens (15min) + Refresh tokens (7 dÃ­as)
- **Seguridad**: bcrypt hash (12 rounds), rate limiting por endpoint
- **Emails**: VerificaciÃ³n de cuenta y reset de contraseÃ±a
- **ValidaciÃ³n**: Schemas Joi para todos los endpoints
- **Base de datos**: Tablas users y refresh_tokens con triggers automÃ¡ticos
